import{$ as V,Aa as s,Ba as c,Da as tt,Ea as u,Fa as et,Ga as ot,Ha as v,Ia as nt,J as G,Ja as D,O as h,Q as _,R as U,Sa as f,Ta as N,W as K,X as $,Y as q,_a as it,a as r,b as l,ea as k,fa as R,ga as Y,ma as X,oa as b,qa as J,sa as Q,ta as Z,wa as y,xa as I,ya as M,za as j}from"./chunk-DSSFOLY6.js";var d={NORTH:"NORTH",SOUTH:"SOUTH",EAST:"EAST",WEST:"WEST"},rt={[d.NORTH]:{x:0,y:1},[d.SOUTH]:{x:0,y:-1},[d.EAST]:{x:1,y:0},[d.WEST]:{x:-1,y:0}};var w=class o{cell=R.required();placeRobot=k();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-robot"]],inputs:{cell:[1,"cell"]},outputs:{placeRobot:"placeRobot"},standalone:!0,features:[D],decls:1,vars:2,consts:[["title","Place Robot","data-cy","robot-cell",1,"grid-cell",3,"click","ngClass"]],template:function(e,n){if(e&1&&(s(0,"div",0),u("click",function(){return n.placeRobot.emit({x:n.cell().x,y:n.cell().y})}),c()),e&2){let i;ot("ngClass","robot--",(i=n.cell().direction)==null?null:i.toLowerCase(),"")}},dependencies:[it],styles:[".grid-cell[_ngcontent-%COMP%]{border:1px solid var(--border-color);width:5rem;height:5rem;background-image:url(/assets/robot-sheet.png);background-position:-35px -175px;cursor:pointer}.robot--north[_ngcontent-%COMP%]{background-position:-35px -385px}.robot--south[_ngcontent-%COMP%]{background-position:-35px -73px}.robot--east[_ngcontent-%COMP%]{background-position:-35px -281px}.robot--west[_ngcontent-%COMP%]{background-position:-35px -488px}"],changeDetection:0})};function St(o,t){if(o&1){let e=tt();s(0,"app-robot",4),u("placeRobot",function(i){$(e);let a=et(2);return q(a.placeRobot.emit(i))}),c()}if(o&2){let e=t.$implicit;y("cell",e)}}function yt(o,t){if(o&1&&(s(0,"div",2),M(1,St,1,1,"app-robot",3,I),c()),o&2){let e=t.$implicit;b(),j(e)}}var P=class o{grid=R.required();placeRobot=k();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-tabletop"]],inputs:{grid:[1,"grid"]},outputs:{placeRobot:"placeRobot"},standalone:!0,features:[D],decls:4,vars:0,consts:[["data-cy","tabletop",1,"grid-container"],["data-cy","tabletop-grid",1,"grid"],[1,"grid-row"],[3,"cell"],[3,"placeRobot","cell"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1),M(2,yt,3,0,"div",2,I),c()()),e&2&&(b(2),j(n.grid()))},dependencies:[w],styles:[".grid-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.grid[_ngcontent-%COMP%]{display:grid}.grid-row[_ngcontent-%COMP%]{display:grid;grid-auto-columns:1fr;grid-auto-flow:column;grid-auto-rows:1fr}"],changeDetection:0})};var E=class o{appRobotSimulatorDisabledButton=R();title=R("Please place the robot first");#t=h(J);#e=h(Y);ngOnChanges(t){t.appRobotSimulatorDisabledButton&&(this.#o(),this.#n())}#o(){this.appRobotSimulatorDisabledButton()?(this.#t.setStyle(this.#e.nativeElement,"cursor","not-allowed"),this.#t.setProperty(this.#e.nativeElement,"disabled",!0)):(this.#t.setStyle(this.#e.nativeElement,"cursor","pointer"),this.#t.setProperty(this.#e.nativeElement,"disabled",!1))}#n(){let t=this.title();t?this.#t.setAttribute(this.#e.nativeElement,"title",t):this.#t.removeAttribute(this.#e.nativeElement,"title")}static \u0275fac=function(e){return new(e||o)};static \u0275dir=U({type:o,selectors:[["","appRobotSimulatorDisabledButton",""]],inputs:{appRobotSimulatorDisabledButton:[1,"appRobotSimulatorDisabledButton"],title:[1,"title"]},standalone:!0,features:[K]})};function st(o){let t=N(()=>o());return ht(t)?new Proxy(o,{get(e,n){return n in t?(Q(e[n])||Object.defineProperty(e,n,{value:f(()=>e()[n]),configurable:!0}),st(e[n])):e[n]}}):o}function ht(o){return o?.constructor===Object}var Rt=new WeakMap,m=Symbol("STATE_SOURCE");function T(o,...t){o[m].update(e=>t.reduce((n,i)=>r(r({},n),typeof i=="function"?i(n):i),e)),vt(o)}function Ct(o){return o[m]()}function _t(o){return Rt.get(o[m])||[]}function vt(o){let t=_t(o);for(let e of t){let n=N(()=>Ct(o));e(n)}}function ct(...o){let t=[...o],e=typeof t[0]=="function"?{}:t.shift(),n=t;return(()=>{class a{constructor(){let g=n.reduce((x,gt)=>gt(x),Dt()),{stateSignals:p,computedSignals:S,methods:bt,hooks:ft}=g,W=r(r(r({},p),S),bt);this[m]=g[m];for(let x in W)this[x]=W[x];let{onInit:z,onDestroy:L}=ft;z&&z(),L&&h(V).onDestroy(L)}static \u0275fac=function(p){return new(p||a)};static \u0275prov=G({token:a,factory:a.\u0275fac,providedIn:e.providedIn||null})}return a})()}function Dt(){return{[m]:Z({}),stateSignals:{},computedSignals:{},methods:{},hooks:{}}}function lt(o){return t=>{let e=o(r(r({},t.stateSignals),t.computedSignals));return Object.keys(e),l(r({},t),{computedSignals:r(r({},t.computedSignals),e)})}}function ut(o){return t=>{let e=o(r(r(r({[m]:t[m]},t.stateSignals),t.computedSignals),t.methods));return Object.keys(e),l(r({},t),{methods:r(r({},t.methods),e)})}}function dt(o){return t=>{let e=typeof o=="function"?o():o,n=Object.keys(e);t[m].update(a=>r(r({},a),e));let i=n.reduce((a,C)=>{let g=f(()=>t[m]()[C]);return l(r({},a),{[C]:st(g)})},{});return l(r({},t),{stateSignals:r(r({},t.stateSignals),i)})}}function B({x:o,y:t,gridSize:e}){return o!==void 0&&t!==void 0&&e!==void 0&&o>=0&&o<e&&t>=0&&t<e}function A({x:o,y:t,direction:e}){return o!==void 0&&t!==void 0&&e!==void 0}function pt(o,t,e,n){let i=n;return i?Array.from({length:i},(a,C)=>Array.from({length:i},(g,p)=>{let S=i-1-C;return o===p&&S===t?{x:p,y:S,direction:e}:{x:p,y:S,direction:void 0}})):[]}function H(o,t){let e=[d.NORTH,d.EAST,d.SOUTH,d.WEST],n=e.indexOf(o),i=t?(n+3)%e.length:(n+1)%e.length;return e[i]}var Tt={x:void 0,y:void 0,direction:void 0,gridSize:void 0},F=ct(dt(Tt),lt(({x:o,y:t,direction:e,gridSize:n})=>({isPlaced:f(()=>A({x:o(),y:t(),direction:e(),gridSize:n()})),isOnGrid:f(()=>B({x:o(),y:t(),gridSize:n()})),report:f(()=>`${o()},${t()},${e()}`),grid:f(()=>pt(o(),t(),e(),n())),position:f(()=>({x:o(),y:t(),direction:e()}))})),ut(o=>({setGridSize(t){T(o,e=>l(r({},e),{gridSize:t}))},place({x:t,y:e,direction:n}){return T(o,i=>i.gridSize?l(r({},i),{x:t,y:e,direction:n}):(console.warn("Grid size must be set before placing the robot."),i))},move(){return T(o,t=>{if(!o.isPlaced())return console.warn("Robot is not placed. Please place the robot first."),t;let{x:e,y:n,direction:i,gridSize:a}=t;if(A({x:e,y:n,direction:i,gridSize:a})){let{x:C,y:g}=rt[i],p=e+C,S=n+g;if(B({x:p,y:S,gridSize:a}))return l(r({},t),{x:p,y:S});console.warn("Move is out of bounds. The robot cannot move off the grid.")}return t})},rotateLeft(){return T(o,t=>{if(!o.isPlaced())return console.warn("Robot is not placed. Please place the robot first."),t;let{direction:e}=t;return e?l(r({},t),{direction:H(e,!0)}):t})},rotateRight(){return T(o,t=>{if(!o.isPlaced())return console.error("Robot is not placed. Please place the robot first."),t;let{direction:e}=t;return e?l(r({},t),{direction:H(e,!1)}):t})}})));var mt=class o{store=h(F);grid=this.store.grid;isRobotPlaced=this.store.isPlaced;onKeydown(t){switch(t.key){case"ArrowUp":this.store.move();break;case"ArrowDown":this.store.rotateRight(),this.store.rotateRight();break;case"ArrowLeft":this.store.rotateLeft();break;case"ArrowRight":this.store.rotateRight();break;default:break}}ngOnInit(){this.store.setGridSize(5)}report(){alert(this.store.report())}placeRobot(t,e){this.store.place({x:t,y:e,direction:d.NORTH})}moveRobot(){this.store.move()}rotateRobotLeft(){this.store.rotateLeft()}rotateRobotRight(){this.store.rotateRight()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-robot-simulator"]],hostBindings:function(e,n){e&1&&u("keydown",function(a){return n.onKeydown(a)},!1,X)},standalone:!0,features:[nt([F]),D],decls:13,vars:5,consts:[["data-cy","header",1,"header"],[3,"placeRobot","grid"],[1,"controls"],["data-cy","left-button",3,"click","appRobotSimulatorDisabledButton"],["data-cy","move-button",3,"click","appRobotSimulatorDisabledButton"],["data-cy","right-button",3,"click","appRobotSimulatorDisabledButton"],[1,"report-button"],["data-cy","report-button",3,"click","appRobotSimulatorDisabledButton"]],template:function(e,n){e&1&&(s(0,"div",0),v(1,` Click to place the robot, use the buttons or arrows to move
`),c(),s(2,"app-tabletop",1),u("placeRobot",function(a){return n.placeRobot(a.x,a.y)}),c(),s(3,"div",2)(4,"button",3),u("click",function(){return n.rotateRobotLeft()}),v(5,"Left"),c(),s(6,"button",4),u("click",function(){return n.moveRobot()}),v(7,"Move"),c(),s(8,"button",5),u("click",function(){return n.rotateRobotRight()}),v(9,"Right"),c()(),s(10,"div",6)(11,"button",7),u("click",function(){return n.report()}),v(12,"Report"),c()()),e&2&&(b(2),y("grid",n.grid()),b(2),y("appRobotSimulatorDisabledButton",!n.isRobotPlaced()),b(2),y("appRobotSimulatorDisabledButton",!n.isRobotPlaced()),b(2),y("appRobotSimulatorDisabledButton",!n.isRobotPlaced()),b(3),y("appRobotSimulatorDisabledButton",!n.isRobotPlaced()))},dependencies:[P,E],styles:[".header[_ngcontent-%COMP%]{background:var(--secondary-color);color:var(--on-secondary-color);width:calc(25rem - 20px);display:flex;justify-content:center;margin:2rem auto;padding:15px;border-radius:var(--border-radius)}.controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem;gap:1rem}button[_ngcontent-%COMP%]{padding:.5rem;border-radius:var(--border-radius);border:none;background-color:var(--primary-color);color:var(--on-secondary-color);font-size:14px;cursor:pointer;min-width:5rem}.report-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem;gap:1rem}.report-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--secondary-color);color:var(--on-secondary-color);border:1px solid var(--primary-color);min-width:10rem}"],changeDetection:0})};export{mt as RobotSimulatorComponent};
